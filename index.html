<!DOCTYPE html>
<html>
    <head>
        <title>RPG Improvisation</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="./css/pure-min.css"/>
        <link rel="stylesheet" href="./css/grids-responsive-min.css"/>
        <link rel="stylesheet" href="./css/main.css"/>
        <link rel="stylesheet" href="./css/autocomplete.css"/>
        <link rel="stylesheet" href="./css/fontello.css"/>
        <link rel="stylesheet" href="./css/animation.css"/>
        <link rel="stylesheet" href="./css/toasts.css"/>
        <link rel="apple-touch-icon-precomposed" href="app.jpg">
        <link rel="icon" href="app.png">
    </head>
    <body>
        <div class="content">
            <div id="waiting" class="pure-g">
                <div class="pure-u-1">
                    <i class="icon-spinner animate-spin"></i>
                </div>
            </div>
            <rg-toasts></rg-toasts>
            <spa id="mainapp" class="hidden"></spa>
        </div>

        <footer>RPG Improvisation</footer>

        <script src="./js/utils.js"></script>
        <script src="./js/riot+compiler.min.js"></script>
        <script src="./js/rg-toasts.js"></script>
        <script src="./js/toasty-mixin.js"></script>
        <script src="./js/Graph.js"></script>
        <script src="./js/db.js"></script>
        <script src="./js/textcomplete.min.js"></script>

        <script src="./tag/spa.tag" type="riot/tag"></script>
        <script src="./tag/vertex-list.tag" type="riot/tag"></script>
        <script src="./tag/vertex.tag" type="riot/tag"></script>
        <script src="./tag/vertex-detail.tag" type="riot/tag"></script>
        <script src="./tag/hashtag-decorator.tag" type="riot/tag"></script>
        <script src="./tag/hashtag-decorator-ro.tag" type="riot/tag"></script>
        <script src="./tag/vertex-form.tag" type="riot/tag"></script>
        <script src="./tag/outer-edge.tag" type="riot/tag"></script>
        <script src="./tag/inner-edge.tag" type="riot/tag"></script>
        <script src="./tag/google-drive.tag" type="riot/tag"></script>
        <script src="./tag/google-drive-repo-save.tag" type="riot/tag"></script>
        <script src="./tag/google-drive-repo-load.tag" type="riot/tag"></script>
        <script src="./tag/google-drive-doc-save.tag" type="riot/tag"></script>
        <script src="./tag/google-drive-doc-load.tag" type="riot/tag"></script>

        <script src="./js/GoogleDrive.js"></script>
        <script src="./js/icon-google-drive.js"></script>

        <script>
            var cloudClient = new GoogleDrive({
                clientId: '374977961173-5novsbmqqspuvqr0s54jjocimluvos64.apps.googleusercontent.com',
                appId: '374977961173',
                apiKey: 'AIzaSyDgilBkA3oUaSyczUAHLmK41IqehCbzpqI'
            })
            cloudClient.setIcon(googleDriveThumbnail)

            // container for this SPA
            var RpgImpro = {
                repository: new Graph(),
                document: new Graph()
            }
            init()

            function handleClientLoad() {
                cloudClient.connect()
                        .then(function () {
                            cloudClient.trigger('connected')
                        })
            }
            // Here we go
            riot.mixin('toasty', Toasty)
            riot.observable(RpgImpro.document)
            riot.route.start(true)
            riot.mount('*')
        </script>

        <script async defer src="https://apis.google.com/js/api.js"
                onload="this.onload = function () {
                };
                handleClientLoad()"
                onreadystatechange="if (this.readyState === 'complete') this.onload()">
        </script>
    </body>
</html>
